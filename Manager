#!/bin/bash

# File Manager
# Made by AlphaDinosaur89

usage="Commands:
executable Makes a file executable
execute    Executes an file
move       Move an directory or file 
clear      Clears commands output
see        Prints every line of a file
edit       Edit an file with vim
files      Prints files and directories in the current directory
goto       Navigate through the directories 
delete     Deletes files and directories
openimage  Opens an image"

while true; do
    case $1 in
     -h) 
        echo "$usage"
        exit 0
        ;;
    --help)
        echo "$usage"
        exit 0
        ;;
    -help)
        echo "$usage"
        exit 0
        ;;
    -usage)
        echo "$usage"
        exit 0
        ;;
    --usage)
        echo "$usage"
        exit 0
        ;;
    -v)
	printf "FileManager\nMade by: AlphaDinosaur89\nVersion:1.5.8-2\n"
	exit 0
	;;
    --version)
	printf "FileManager\nMadeby: AlphaDinosaur89\nVerion:1.5.8-2\n"
	exit 0
	;;
    "")
        break
        ;;
    *)
        echo "Invalid option"
        echo "Use --help to help"
        exit 0
        ;;
    esac
done

wmctrl -r :ACTIVE: -N "File manager"

ctrc() {
	clear
	exit 0
}


trap ctrc INT

clear
while true; do

	echo ""
	echo "File Manager"
	echo "use help to help"
	echo ""
	echo -n "~$PWD $ "
	
	read command
	
	clear
	case $command in
		help)
		clear
		echo ""
       		echo "commands:"
        	echo "executable, execute, move, clear, see, edit, files, goto, delete"
        	echo "openimage"
            echo "For more help use Manager --help on the command line"
		echo ""
		;;

		goto)
		clear
		echo ""
		echo "Where you want to go?"
		echo ""
		
		read goto
		cd "$goto"
		;;

		delete)
		clear
		echo ""
		echo "Delete wich file?"
		echo ""

		read "del"
		rm -r -f "$del"
		;;

		files)
		clear
		echo ""
		ls --color=auto
		echo ""
		;;

		exit)
		clear
		echo ""
		echo "exiting"
		echo ""

		clear
		exit 0
		;;
	
		see)
		echo ""
		echo "See wich file"
		echo ""
		
		read "cat"
		cat "$cat"
        echo ""
		;;

		edit)
		echo ""
		echo "Edit wich file?"
		echo ""
		
		read "edt"
		vim "$edt"
        	echo ""
        	;;

		clear)
		clear
		;;

        	
		move)
		echo ""
		echo "Choose file to move"
		echo ""
		
		read "mv"
		clear

		echo ""
		echo "Choose location to move"
		echo ""
		
		read "loc"
		mv "$mv" "$loc"
		;;

		openimage)
		echo ""
		echo "Choose image to open"
		echo ""

		read "opn"
		clear

		if tiv "$opn"; then
			echo ""
		else
			echo ""
			echo "Error cant open '$opn' image, no image found"
		fi
		;;

        execute)
		echo ""
		echo "Choose file to execute"
		echo ""

		read "exc"
        clear        
            
		if ./"$exc"; then
            break
		else
			echo "Error cant find that file, have you marked it as an executable?"
		fi
		;;

        executable)
		echo ""
		echo "Choose file to make it executable"
		echo "Options: true/false"
		echo ""

		read "tof"

		clear

		if [[ $tof == true ]]; then
			echo ""
			echo "Choose file to make/remove it executable"
			echo ""

			read exec
			chmod +x $exec
		elif [[ $tof == false ]]; then
			clear
        else
			echo ""
			echo "Option not found"
			echo ""
        fi

        ;;

        *)
		echo ""
		echo "Command not found"
		echo ""
		;;        
        
     esac

done
